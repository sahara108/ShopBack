//
//  MovieOverviewModelTest.swift
//  ShopBack
//
//  Created by Nguyen Tuan on 9/6/17.
//  Copyright © 2017 Nguyen Tuan. All rights reserved.
//

import XCTest
import SwiftyJSON
@testable import ShopBack

class MovieOverviewModelTest: XCTestCase {
    
    override func setUp() {
        super.setUp()
        // Put setup code here. This method is called before the invocation of each test method in the class.
    }
    
    override func tearDown() {
        // Put teardown code here. This method is called after the invocation of each test method in the class.
        super.tearDown()
    }
    
    func testInitilization() {
        let validString = "{\"vote_count\":0,\"id\":439468,\"video\":false,\"vote_average\":0,\"title\":\"Puccini Gianni Schicchi\",\"popularity\":1.012058,\"poster_path\":\"/cWWCWbsJa2t0FbQwsdQR27MRP3k.jpg\",\"original_language\":\"en\",\"original_title\":\"Puccini Gianni Schicchi\",\"genre_ids\":[],\"backdrop_path\":null,\"adult\":false,\"overview\":\"\",\"release_date\":\"2015-02-04\"}"
        
        var json = JSON(parseJSON: validString)
        var model = MovieOverviewModel(json: json)
        XCTAssertNotNil(model, "should create movie model overview with a valid json")
        
        //Test some different date format
        let stringWithDifferentDateFromat1 = "{\"vote_count\":0,\"id\":439468,\"video\":false,\"vote_average\":0,\"title\":\"Puccini Gianni Schicchi\",\"popularity\":1.012058,\"poster_path\":\"/cWWCWbsJa2t0FbQwsdQR27MRP3k.jpg\",\"original_language\":\"en\",\"original_title\":\"Puccini Gianni Schicchi\",\"genre_ids\":[],\"backdrop_path\":null,\"adult\":false,\"overview\":\"\",\"release_date\":\"15-02-04\"}"
        json = JSON(parseJSON: stringWithDifferentDateFromat1)
        model = MovieOverviewModel(json: json)
        XCTAssertNotNil(model, "date format yy-mm-dd")
        
        let invalidString = "{\"vote_count\":\"22\"}"
        json = JSON(parseJSON: invalidString)
        model = MovieOverviewModel(json: json)
        XCTAssertNil(model, "return nil with an invalid input string")
        
        //This test will check all available value from server, it is used to check what paramtter is optional
        let sampleResults = "[{\"vote_count\":0,\"id\":439468,\"video\":false,\"vote_average\":0,\"title\":\"Puccini Gianni Schicchi\",\"popularity\":1.012058,\"poster_path\":\"/cWWCWbsJa2t0FbQwsdQR27MRP3k.jpg\",\"original_language\":\"en\",\"original_title\":\"Puccini Gianni Schicchi\",\"genre_ids\":[],\"backdrop_path\":null,\"adult\":false,\"overview\":\"\",\"release_date\":\"2015-02-04\"},{\"vote_count\":0,\"id\":440656,\"video\":false,\"vote_average\":0,\"title\":\"Super GALS!\",\"popularity\":1.3501,\"poster_path\":\"/duahzgtKA6fQKOu4nav89va7R7E.jpg\",\"original_language\":\"en\",\"original_title\":\"Super GALS!\",\"genre_ids\":[16,35],\"backdrop_path\":null,\"adult\":false,\"overview\":\"\",\"release_date\":\"2001-04-01\"},{\"vote_count\":0,\"id\":256822,\"video\":false,\"vote_average\":0,\"title\":\"Sagara Sangamam\",\"popularity\":1.000164,\"poster_path\":\"/mAH97Vj79ZNy8jso27NrVyEIlWv.jpg\",\"original_language\":\"te\",\"original_title\":\"Sagara Sangamam\",\"genre_ids\":[18],\"backdrop_path\":null,\"adult\":false,\"overview\":\"\",\"release_date\":\"1983-06-03\"},{\"vote_count\":0,\"id\":328749,\"video\":false,\"vote_average\":0,\"title\":\"Boys in the Sand\",\"popularity\":1,\"poster_path\":\"/byIYYC1actrUIEl2opmOTgTrRIv.jpg\",\"original_language\":\"en\",\"original_title\":\"Boys in the Sand\",\"genre_ids\":[],\"backdrop_path\":null,\"adult\":false,\"overview\":\"\",\"release_date\":\"1971-01-04\"},{\"vote_count\":0,\"id\":169181,\"video\":false,\"vote_average\":0,\"title\":\"Earth From Space\",\"popularity\":1.002634,\"poster_path\":\"/gjy2lwyS4J2u6RlLdF6L5x1Ikth.jpg\",\"original_language\":\"en\",\"original_title\":\"Earth From Space\",\"genre_ids\":[99],\"backdrop_path\":\"/7R7PYyvaGUaibvjSwAeKeaOTwJ7.jpg\",\"adult\":false,\"overview\":\"\",\"release_date\":\"2012-06-04\"},{\"vote_count\":1,\"id\":441580,\"video\":false,\"vote_average\":10,\"title\":\"The Jinx: The Life and Deaths of Robert Durst Season 1 Chapter 6: What the Hell Did I Do?\",\"popularity\":1,\"poster_path\":\"/9Hj2bqi955SvTa5zj7uZs6sic29.jpg\",\"original_language\":\"en\",\"original_title\":\"The Jinx: The Life and Deaths of Robert Durst Season 1 Chapter 6: What the Hell Did I Do?\",\"genre_ids\":[99],\"backdrop_path\":\"/3br0Rt90AkaqiwVBZVvVUYD1juQ.jpg\",\"adult\":false,\"overview\":\"\",\"release_date\":\"2015-03-15\"},{\"vote_count\":0,\"id\":377596,\"video\":false,\"vote_average\":0,\"title\":\"Tom and Jerry: Spotlight Collection\",\"popularity\":1.000286,\"poster_path\":\"/wAZ7Z94MdA7wV2mLrNDWT4lp5xe.jpg\",\"original_language\":\"en\",\"original_title\":\"Tom and Jerry: Spotlight Collection\",\"genre_ids\":[10751,16,35],\"backdrop_path\":\"/lDPBHy0D81x1nG4iBfJfy8qQsRT.jpg\",\"adult\":false,\"overview\":\"\",\"release_date\":\"2004-10-26\"},{\"vote_count\":3,\"id\":18702,\"video\":false,\"vote_average\":7.3,\"title\":\"Pot o' Gold\",\"popularity\":1.686765,\"poster_path\":\"/Mi5KGNflQjEwLmGfl2HuCanYhA.jpg\",\"original_language\":\"en\",\"original_title\":\"Pot o' Gold\",\"genre_ids\":[10402,10749],\"backdrop_path\":\"/gUeT3mZI1AnvIsAPbgSIxlPSvW1.jpg\",\"adult\":false,\"overview\":\"Jimmy, the owner of a failed music shop, goes to work with his uncle, the owner of a food factory. Before he gets there, he befriends an Irish family who happens to be his uncle's worst enemy because of their love for music and in-house band who constantly practices. Soon, Jimmy finds himself trying to help the band by getting them gigs and trying to reconcile the family with his uncle.\",\"release_date\":\"1941-04-03\"},{\"vote_count\":3,\"id\":18703,\"video\":false,\"vote_average\":7,\"title\":\"My Dear Secretary\",\"popularity\":1.608512,\"poster_path\":\"/yxtZ8B3U9Xm8ATg1I1YXfF3XyKM.jpg\",\"original_language\":\"en\",\"original_title\":\"My Dear Secretary\",\"genre_ids\":[18,10749],\"backdrop_path\":\"/kFL7RKCDlEjIQtndiXf1xAgWIE0.jpg\",\"adult\":false,\"overview\":\"A budding young writer thinks it's her lucky day when she is chosen to be the new secretary for Owen Waterbury, famous novelist. She is soon disppointed, however, when he turns out to be an erratic, immature playboy. Opposites attract, of course, but not without sub-plots that touch on competitiveness within marriage and responsibility.\",\"release_date\":\"1949-01-12\"},{\"vote_count\":24,\"id\":18704,\"video\":false,\"vote_average\":6.9,\"title\":\"Failan\",\"popularity\":1.312652,\"poster_path\":\"/oYAhcM0hrz00J13k6sURCSFFjFO.jpg\",\"original_language\":\"ko\",\"original_title\":\"파이란\",\"genre_ids\":[18,10749],\"backdrop_path\":\"/qHq6eadYjTXRAXLfSaB0dYeGeCB.jpg\",\"adult\":false,\"overview\":\"After losing both her parents, Failan emmigrates to Korea to seek her only remaining relatives. Once she reaches Korea, she finds out that her relatives have moved to Canada well over a year ago. Desperate to stay and make a living in Korea, Failan is forced to have an arranged marriage through a match-making agency.\",\"release_date\":\"2001-04-28\"},{\"vote_count\":0,\"id\":24305,\"video\":false,\"vote_average\":0,\"title\":\"Pride Critical Countdown 2004\",\"popularity\":1.017839,\"poster_path\":\"/uCwskA8yyWJ7GToKn09IU4L4NwP.jpg\",\"original_language\":\"en\",\"original_title\":\"Pride Critical Countdown 2004\",\"genre_ids\":[],\"backdrop_path\":null,\"adult\":false,\"overview\":\"Pride Critical Countdown 2004 was a mixed martial arts event held by Pride Fighting Championships. The event held the second round of the Heavyweight tournament. It took place on June 20th, 2004, at the Saitama Super Arena in Saitama, Japan.\",\"release_date\":\"2004-06-20\"},{\"vote_count\":0,\"id\":24306,\"video\":false,\"vote_average\":0,\"title\":\"The Keep\",\"popularity\":1.00559,\"poster_path\":null,\"original_language\":\"en\",\"original_title\":\"The Keep\",\"genre_ids\":[],\"backdrop_path\":null,\"adult\":false,\"overview\":\"No overview found.\",\"release_date\":\"2005-01-01\"},{\"vote_count\":0,\"id\":24307,\"video\":false,\"vote_average\":0,\"title\":\"Pride Bushido 3\",\"popularity\":1.004306,\"poster_path\":\"/vZFOJuSUWCMOCARtR8MQPijQ6WF.jpg\",\"original_language\":\"en\",\"original_title\":\"Pride Bushido 3\",\"genre_ids\":[],\"backdrop_path\":null,\"adult\":false,\"overview\":\"Pride Bushido 3 was a mixed martial arts event held by the Pride Fighting Championships. It took place at the Yokohama Arena in Yokohama, Japan on May 23, 2004. The fight card was highlighted by three fights between Team Gracie and Team Japan.\",\"release_date\":\"2004-05-23\"},{\"vote_count\":4,\"id\":16726,\"video\":false,\"vote_average\":6.3,\"title\":\"Muay Thai Fighter\",\"popularity\":1.017791,\"poster_path\":\"/7KV9rvfXy007Un3WvNBdxbLBx6t.jpg\",\"original_language\":\"en\",\"original_title\":\"Chaiya\",\"genre_ids\":[28,53,10769],\"backdrop_path\":\"/tz6mduC94h0ZqvXQWephS8bykbX.jpg\",\"adult\":false,\"overview\":\"After learning the art of muay thai fighting from skilled masters, small town friends Piak (Akara Amarttayakul) and Phao (Thawatchai Phanpakdee) move their passion to Bangkok, where they become active in underground activities that put what they've learned to the test. But in the process of fighting for their lives, they also resurrect the sport -- and cement the bonds of their lifelong friendship.\",\"release_date\":\"2007-08-30\"},{\"vote_count\":50,\"id\":16727,\"video\":false,\"vote_average\":6.8,\"title\":\"The Namesake\",\"popularity\":1.269076,\"poster_path\":\"/3GQztBhAz1dfs4SUCfPyTwpPKg5.jpg\",\"original_language\":\"en\",\"original_title\":\"The Namesake\",\"genre_ids\":[18],\"backdrop_path\":\"/t6WmMdJVmCOesSccBuTaTnWzdmH.jpg\",\"adult\":false,\"overview\":\"American-born Gogol, the son of Indian immigrants, wants to fit in among his fellow New Yorkers, despite his family's unwillingness to let go of their traditional ways.\",\"release_date\":\"2006-09-02\"},{\"vote_count\":43,\"id\":16729,\"video\":false,\"vote_average\":6.9,\"title\":\"Don't Move\",\"popularity\":1.665112,\"poster_path\":\"/nxLYuKpyvSFjX9Mz85zHdKpjWRo.jpg\",\"original_language\":\"it\",\"original_title\":\"Non ti muovere\",\"genre_ids\":[18,10749],\"backdrop_path\":\"/bibyT3bv9QWOMF2DzmfTZxgxHJn.jpg\",\"adult\":false,\"overview\":\"While waiting for the brain surgery of his daughter Angela, victim of a motorcycle accident, the surgeon Timoteo recalls his torrid affair with and passion for Italia, a simple woman from slums in the periphery of the big city where he lives. The ghost of the beloved and sexual object of desire Italia chases him in his memories.\",\"release_date\":\"2004-03-12\"},{\"vote_count\":16,\"id\":18710,\"video\":false,\"vote_average\":6,\"title\":\"Capone\",\"popularity\":1.769975,\"poster_path\":\"/rxnyb4IFTg1u3e5x9INJmhmZRbW.jpg\",\"original_language\":\"en\",\"original_title\":\"Capone\",\"genre_ids\":[80,18],\"backdrop_path\":\"/64xVmzet4xBkzElHvgWO6q1cMxa.jpg\",\"adult\":false,\"overview\":\"The story of the rise and fall of the infamous Chicago gangster Al Capone and the control he exhibited over the city during the prohibition years.\",\"release_date\":\"1975-04-16\"},{\"vote_count\":13,\"id\":18711,\"video\":false,\"vote_average\":6.3,\"title\":\"Silver City\",\"popularity\":1.438159,\"poster_path\":\"/cFikozlPUtD5i3U9ajhMyj7RT2T.jpg\",\"original_language\":\"en\",\"original_title\":\"Silver City\",\"genre_ids\":[35,18,9648,53],\"backdrop_path\":\"/8QBNs7gjf5QH7WUbLZz716v4a7b.jpg\",\"adult\":false,\"overview\":\"The discovery of a corpse threatens to unravel a bumbling local politician's campaign for governor of Colorado.\",\"release_date\":\"2004-09-17\"},{\"vote_count\":0,\"id\":16731,\"video\":false,\"vote_average\":0,\"title\":\"Year Zero\",\"popularity\":1.004852,\"poster_path\":\"/gltoP0ZRsKfd5N5Qh1ktI0XJ9Jk.jpg\",\"original_language\":\"en\",\"original_title\":\"Shnat Effes\",\"genre_ids\":[18],\"backdrop_path\":\"/hZ1iqf9CLEN93reAV8p4wqpJUi6.jpg\",\"adult\":false,\"overview\":\"Through a mosaic of stories intertwined and created a current picture of the sad social and economic situation in Israel. Mother forced into prostitution to support her son; Blind man must survive after loosing his dog; Son is looking for his rocker father's; Apartment owner complicates his life while entering the underworld...\",\"release_date\":\"2004-06-06\"},{\"vote_count\":44,\"id\":16759,\"video\":false,\"vote_average\":6.6,\"title\":\"Five Minutes of Heaven\",\"popularity\":2.246223,\"poster_path\":\"/phpycIKlAJaKPwonMgBweFr3BXD.jpg\",\"original_language\":\"en\",\"original_title\":\"Five Minutes of Heaven\",\"genre_ids\":[80,18,53],\"backdrop_path\":\"/4pijs6nhYxqKxoiVV1iW6TIkcp4.jpg\",\"adult\":false,\"overview\":\"The story of former UVF member Alistair Little. Twenty-five years after Little killed Joe Griffen's brother, the media arrange an auspicious meeting between the two.\",\"release_date\":\"2009-01-19\"}]"
        let array = JSON(parseJSON: sampleResults).arrayValue
        for item in array {
            let model = MovieOverviewModel(json: item)
            XCTAssertNotNil(model, "create object from real result \(item)")
        }
        
    }
}
